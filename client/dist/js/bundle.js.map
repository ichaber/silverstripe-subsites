{"version":3,"sources":["webpack:///webpack/bootstrap 33670a885af645165df8","webpack:///./client/src/boot/index.js","webpack:///./client/src/boot/registerComponents.js","webpack:///./client/src/bundles/bundle.js","webpack:///./client/src/components/SubsiteChangeAlert/SubsiteChangeAlert.jsx","webpack:///./client/src/legacy/createEvent.js","webpack:///./client/src/legacy/entwine/LeftAndMain_Subsites.js","webpack:///./client/src/legacy/entwine/SubsitesTreeDropdownField.js","webpack:///external \"Injector\"","webpack:///external \"jQuery\"","webpack:///external \"PropTypes\"","webpack:///external \"React\"","webpack:///external \"ReactDom\"","webpack:///external \"Reactstrap\"","webpack:///external \"i18n\""],"names":["window","document","addEventListener","Injector","component","registerMany","SubsiteChangeAlert","require","props","state","modalOpen","revertActiveSubsite","bind","localStorage","request","XMLHttpRequest","subsiteSelector","getElementById","subsiteIdForThisTab","value","subsiteNameForThisTab","options","selectedIndex","text","subsiteInfo","subsiteID","subsiteName","open","storageValue","JSON","stringify","setItem","dispatchEvent","send","newSubsiteID","newSubsiteName","thisSubsite","i18n","_t","inject","id","REVERT","Component","propTypes","PropTypes","number","string","createEvent","type","extraData","Event","event","initEvent","key","$","entwine","ModalNode","onadd","storageEvent","subsiteChangeEvent","newValue","subsiteNotice","getModalNode","parse","ReactDom","unmountComponentAtNode","val","showReactiveNotice","on","location","search","query","set","storeSubsiteInfo","modalContainer","createElement","body","appendChild","ChangeAlert","get","render","parseInt","setModalNode","onclick","e","loadFragment","_super","onreload","onmatch","showHideSubsiteList","ref","change","parent","css","is","getChangeTrackerOptions","isDefault","entwineData","undefined","opts","extend","ignoreFieldSelector","setChangeTrackerOptions","form","closest","trigger","onafterIframeAdjustedForPreview","doc","subsiteId","find","attr","each","href","match","path","addSearchParams","action","append","jQuery","onchange","name","replace","field","first","setValue","refresh","getAttributes","fieldName","attributes","data","urlTree","cacheKey","substring"],"mappings":"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","file":"js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/src/bundles/bundle.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 33670a885af645165df8","/* global window */\nimport registerComponents from 'boot/registerComponents';\n\nwindow.document.addEventListener('DOMContentLoaded', () => {\n  registerComponents();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/index.js","import Injector from 'lib/Injector';\nimport SubsiteChangeAlert from 'components/SubsiteChangeAlert/SubsiteChangeAlert';\n\nexport default () => {\n  Injector.component.registerMany({\n    // List your React components here so Injector is aware of them\n    SubsiteChangeAlert\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/registerComponents.js","// Include any legacy Entwine wrappers\n\n// Include boot entrypoint\nrequire('legacy/entwine/LeftAndMain_Subsites.js');\nrequire('legacy/entwine/SubsitesTreeDropdownField.js');\nrequire('boot');\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/bundle.js","/* global window */\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport i18n from 'i18n';\nimport createEvent from 'legacy/createEvent';\n\nclass SubsiteChangeAlert extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalOpen: true\n    };\n\n    this.revertActiveSubsite = this.revertActiveSubsite.bind(this);\n  }\n\n  revertActiveSubsite() {\n    const { localStorage, document } = window;\n    const request = new XMLHttpRequest();\n    const subsiteSelector = document.getElementById('SubsitesSelect');\n    const subsiteIdForThisTab = subsiteSelector.value;\n    const subsiteNameForThisTab = subsiteSelector.options[subsiteSelector.selectedIndex].text;\n    const subsiteInfo = {\n      subsiteID: subsiteIdForThisTab,\n      subsiteName: subsiteNameForThisTab\n    }\n    request.open('GET', '?SubsiteID=' + subsiteIdForThisTab);\n    // load event is not called for error states (e.g. 500 codes, etc.)\n    request.addEventListener('load', () => {\n      const storageValue = JSON.stringify(subsiteInfo);\n      // notify all other tabs about the change\n      localStorage.setItem('subsiteInfo', storageValue);\n      // update this tab about the change\n      window.dispatchEvent(createEvent('subsitechange', { subsiteInfo: storageValue }));\n    });\n    request.send();\n  }\n\n  render() {\n    const { newSubsiteID, newSubsiteName, thisSubsite } = this.props;\n\n    return (\n      <Modal isOpen={true} backdrop=\"static\">\n        <ModalHeader>\n          {i18n._t('SubsiteChangeAlert.SUBSITE_CHANGED_TITLE', 'Subsite changed')}\n        </ModalHeader>\n        <ModalBody>\n          {\n            i18n.inject(\n              i18n._t(\n                'SubsiteChangeAlert.SUBSITE_CHANGED',\n                `Your current subsite has changed to {newSubsiteName}, continuing to edit this content will cause problems.\n                To continue editing {thisSubsite}, please change the active subsite back.`\n              ),\n              {\n                id: newSubsiteID,\n                newSubsiteName,\n                thisSubsite\n              }\n            )\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"danger\" onClick={this.revertActiveSubsite}>\n            {i18n._t(SubsiteChangeAlert.REVERT, 'Change back')}\n          </Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSubsiteChangeAlert.propTypes = {\n  newSubsiteID: PropTypes.number,\n  newSubsiteName: PropTypes.string,\n  thisSubsite: PropTypes.string\n}\n\nexport default SubsiteChangeAlert;\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/SubsiteChangeAlert/SubsiteChangeAlert.jsx","/* global window */\n// Polyfill IE11\nfunction createEvent(type, extraData) {\n  const { document, Event } = window;\n  let event;\n  if (typeof Event == 'object') {\n    event = document.createEvent('Event', true, true);\n    event.initEvent(type);\n  } else {\n    event = new Event(type);\n  }\n  if (extraData) {\n    for(let key in extraData) {\n      event[key] = extraData[key];\n    }\n  }\n  return event;\n}\n\nexport default createEvent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/legacy/createEvent.js","/*jslint browser: true, nomen: true*/\n/*global $, window, jQuery*/\nimport ReactDom from 'react-dom';\nimport { loadComponent } from 'lib/Injector';\nimport createEvent from 'legacy/createEvent';\n\n(function($) {\n  'use strict';\n  $.entwine('ss', function($) {\n\n    $('#SubsitesSelect').entwine({\n      ModalNode: null,\n      onadd:function(){\n        // Storage has updated - another tab has changed the subsite info\n        window.addEventListener('storage', function(storageEvent) {\n          if (storageEvent.key === \"subsiteInfo\") {\n            const subsiteChangeEvent = createEvent('subsitechange', { subsiteInfo: storageEvent.newValue });\n            window.dispatchEvent(subsiteChangeEvent);\n          }\n        }, false);\n\n        window.addEventListener('subsitechange', (subsiteChangeEvent) => {\n          const subsiteNotice = this.getModalNode();\n          const subsiteInfo = JSON.parse(subsiteChangeEvent.subsiteInfo);\n          if(subsiteNotice){\n            ReactDom.unmountComponentAtNode(subsiteNotice);\n          }\n          if(subsiteInfo.subsiteID !== this.val()) {\n            this.showReactiveNotice(subsiteInfo);\n          }\n        }, false);\n\n        // Dropdown change trigger\n        this.on('change', () => {\n          const subsiteID = this.val();\n          window.location.search=$.query.set('SubsiteID', subsiteID);\n        });\n\n        // We need to set when a page loads, as it may be e.g. the refresh of a currently blocked tab.\n        this.storeSubsiteInfo();\n      },\n      storeSubsiteInfo() {\n        const subsiteID = this.val();\n        const subsiteInfo = {\n          subsiteID,\n          subsiteName: $(`[value=\"${subsiteID}\"]`, this).text()\n        }\n        window.localStorage.setItem('subsiteInfo', JSON.stringify(subsiteInfo));\n      },\n      showReactiveNotice(subsiteInfo) {\n        // React business\n        const modalContainer = window.document.createElement('div');\n        window.document.body.appendChild(modalContainer);\n        const ChangeAlert = loadComponent('SubsiteChangeAlert');\n        const selectedIndex = this.get(0).selectedIndex;\n        ReactDom.render(\n          <ChangeAlert\n            newSubsiteID={parseInt(this.val(), 10)}\n            newSubsiteName={subsiteInfo.subsiteName}\n            thisSubsite={this.get(0).options[selectedIndex].text}\n          />,\n          modalContainer\n        );\n        this.setModalNode(modalContainer);\n      }\n\t\t});\n\n\t\t/*\n\t\t * Reload subsites dropdown when links are processed\n\t\t */\n\t\t$('.cms-container .cms-menu-list li a').entwine({\n\t\t\tonclick: function(e) {\n\t\t\t\t$('.cms-container').loadFragment('admin/subsite_xhr', 'SubsiteList');\n\t\t\t\tthis._super(e);\n\t\t\t}\n\t\t});\n\n\t\t/*\n\t\t * Reload subsites dropdown when the admin area reloads (for deleting sites)\n\t\t */\n\t\t$('.cms-container .SubsiteAdmin .cms-edit-form fieldset.ss-gridfield').entwine({\n\t\t\tonreload: function(e) {\n\t\t\t\t$('.cms-container').loadFragment('admin/subsite_xhr', 'SubsiteList');\n\t\t\t\tthis._super(e);\n\t\t\t}\n\t\t});\n\n\t\t/*\n\t\t * Reload subsites dropdown when subsites are added or names are modified\n\t\t */\n\t\t$('.cms-container .tab.subsite-model').entwine({\n\t\t\tonadd: function(e) {\n\t\t\t\t$('.cms-container').loadFragment('admin/subsite_xhr', 'SubsiteList');\n\t\t\t\tthis._super(e);\n\t\t\t}\n\t\t});\n\n\t\t// Subsite tab of Group editor\n\t\t$('#Form_ItemEditForm_AccessAllSubsites').entwine({\n\t\t\t/**\n\t\t\t * Constructor: onmatch\n\t\t\t */\n\t\t\tonmatch: function () {\n\t\t\t\tthis.showHideSubsiteList();\n\n\t\t\t\tvar ref=this;\n\t\t\t\t$('#Form_ItemEditForm_AccessAllSubsites input').change(function() {\n\t\t\t\t\tref.showHideSubsiteList();\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tshowHideSubsiteList: function () {\n\t\t\t\t$('#Form_ItemEditForm_Subsites').parent().parent().css('display', ($('#Form_ItemEditForm_AccessAllSubsites_1').is(':checked') ? 'none':''));\n\t\t\t}\n\t\t});\n\n\t\t$('.cms-edit-form').entwine({\n\t\t\t/**\n\t\t\t * TODO: Fix with Entwine API extension. See https://github.com/silverstripe/silverstripe-subsites/pull/125\n\t\t\t */\n\t\t\tgetChangeTrackerOptions: function() {\n\t\t\t\t// Figure out if we're still returning the default value\n\t\t\t\tvar isDefault = (this.entwineData('ChangeTrackerOptions') === undefined);\n\t\t\t\t// Get the current options\n\t\t\t\tvar opts = this._super();\n\n\t\t\t\tif (isDefault) {\n\t\t\t\t\t// If it is the default then...\n\t\t\t\t\t// clone the object (so we don't modify the original),\n\t\t\t\t\tvar opts = $.extend({}, opts);\n\t\t\t\t\t// modify it,\n\t\t\t\t\topts.ignoreFieldSelector +=', input[name=IsSubsite]';\n\t\t\t\t\t// then set the clone as the value on this element\n\t\t\t\t\t// (so next call to this method gets this same clone)\n\t\t\t\t\tthis.setChangeTrackerOptions(opts);\n\t\t\t\t}\n\n\t\t\t\treturn opts;\n\t\t\t}\n\t\t});\n\n\t\t$('.cms-edit-form input[name=action_copytosubsite]').entwine({\n\t\t\tonclick: function(e) {\n\t\t\t\tvar form = this.closest('form');\n\t\t\t\tform.trigger('submit', [this]);\n\t\t\t}\n\t\t});\n\n\t});\n\n\t$.entwine('ss.preview', function($){\n\n\t\t$('.cms-preview').entwine({\n\n\t\t\t/**\n\t\t\t * Update links and forms with GET/POST SubsiteID param, so we remaing on the current subsite.\n\t\t\t * The initial link for the iframe comes from SiteTreeSubsites::updatePreviewLink.\n\t\t\t *\n\t\t\t * This is done so we can use the CMS domain for displaying previews so we prevent single-origin\n\t\t\t * violations and SSL cert problems that come up when iframing content from a different URL.\n\t\t\t */\n\t\t\tonafterIframeAdjustedForPreview: function(event, doc) {\n\t\t\t\tvar subsiteId = $(doc).find('meta[name=x-subsite-id]').attr('content');\n\n\t\t\t\tif (!subsiteId) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Inject the SubsiteID into internal links.\n\t\t\t\t$(doc).find('a').each(function() {\n\t\t\t\t\tvar href = $(this).attr('href');\n\n\t\t\t\t\tif (typeof href!=='undefined' && !href.match(/^http:\\/\\//)) {\n\n\t\t\t\t\t\t$(this).attr('href', $.path.addSearchParams(href, {\n\t\t\t\t\t\t\t'SubsiteID': subsiteId\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Inject the SubsiteID as a hidden input into all forms submitting to the local site.\n\t\t\t\t$(doc).find('form').each(function() {\n\t\t\t\t\tvar action = $(this).attr('action');\n\n\t\t\t\t\tif (typeof action!=='undefined' && !action.match(/^http:\\/\\//)) {\n\t\t\t\t\t\t$(this).append('<input type=hidden name=\"SubsiteID\" value=\"' + subsiteId + '\" >');\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n}(jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/legacy/entwine/LeftAndMain_Subsites.js","(function($) {\n\t$.entwine('ss', function($) {\n\t\t/**\n\t\t * Choose a subsite from which to select pages.\n\t\t * Needs to clear tree dropdowns in case selection is changed.\n\t\t */\n        $('select.subsitestreedropdownfield-chooser').entwine({\n\t\t\tonchange: function() {\n\t\t\t\t// TODO Data binding between two fields\n                const name = this.attr('name').replace('_SubsiteID', '');\n                let field = $('#Form_EditForm_' + name).first();\n                field.setValue(0);\n                field.refresh();\n                field.trigger('change');\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Add selected subsite from separate dropdown to the request parameters\n\t\t * before asking for the tree.\n\t\t */\n\t\t$('.TreeDropdownField.SubsitesTreeDropdownField').entwine({\n            getAttributes() {\n                const fieldName = this.attr('id').replace('Form_EditForm_', '');\n                const subsiteID = $('#Form_EditForm_' + fieldName + '_SubsiteID option:selected').val();\n\n                let attributes = this._super();\n                attributes.data.urlTree += \"?\" + fieldName + \"_SubsiteID=\" + subsiteID;\n                attributes.data.cacheKey = attributes.data.cacheKey.substring(0, 19) + \"_\" + subsiteID;\n                return attributes;\n            }\n\t\t});\n\t});\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/legacy/entwine/SubsitesTreeDropdownField.js","module.exports = Injector;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Injector\"\n// module id = 0\n// module chunks = 0","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 1\n// module chunks = 0","module.exports = PropTypes;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"PropTypes\"\n// module id = 2\n// module chunks = 0","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 3\n// module chunks = 0","module.exports = ReactDom;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDom\"\n// module id = 4\n// module chunks = 0","module.exports = Reactstrap;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Reactstrap\"\n// module id = 5\n// module chunks = 0","module.exports = i18n;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"i18n\"\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}